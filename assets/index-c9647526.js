import{j as e,r as d}from"./react-d84e5e68.js";import{c as H}from"./react-dom-8b7ac5e7.js";import{H as J}from"./react-router-dom-c468db3a.js";import"./firebase-36553ef7.js";import{i as K,g as I,s as Y,c as Z}from"./@firebase-7dbc1d44.js";import{u as E,a as j,P as X}from"./react-redux-da7aad8d.js";import{c as y,a as ee}from"./@reduxjs-cea49342.js";import{i as x,t as se}from"./i18next-0d064a9e.js";import{i as re,u as h}from"./react-i18next-5447eeb6.js";import{u as w,a as te,b as ne,c as A}from"./react-router-1b3d7f17.js";import{B as p,n as N,S as oe,C as T,a as _,A as ae,b,L as ie,u as le,F as $,T as ce,P as ue,c as de,M as me,N as he}from"./@mantine-15603970.js";import{u as P}from"./react-firebase-hooks-7c3c1dd0.js";import"./hoist-non-react-statics-23d96a9a.js";import{$ as pe}from"./react-error-boundary-700e06bd.js";import{J as ge}from"./react18-json-view-23fa606a.js";import{g as fe}from"./graphql-4c55ded1.js";import{v as xe}from"./uuid-cf522c50.js";import"./fast-deep-equal-4802929f.js";import"./scheduler-765c72db.js";import"./@remix-run-073e1ff6.js";import"./idb-81bdbf9b.js";import"./use-sync-external-store-2f415742.js";import"./immer-41fd5235.js";import"./redux-68a1e360.js";import"./@babel-3718bade.js";import"./redux-thunk-ef899f4c.js";import"./clsx-de421188.js";import"./@emotion-82461379.js";import"./stylis-79144faa.js";import"./react-transition-group-c81f1626.js";import"./klona-192252da.js";import"./react-is-e8e5dbb3.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();K({apiKey:"AIzaSyB_5MCwcB7MJute_P3TZYHaMOH17CrmrIc"});const je=({children:s})=>e.jsx(e.Fragment,{children:s}),V=y({name:"variables",initialState:{value:"{}"},reducers:{addVariables(s,r){s.value=r.payload}}}),{addVariables:ve}=V.actions,ye=V.reducer,q=y({name:"response",initialState:{value:"{}"},reducers:{addResponse(s,r){s.value=r.payload}}}),{addResponse:k}=q.actions,be=q.reducer,M=y({name:"query",initialState:{value:""},reducers:{addQuery(s,r){s.value=r.payload}}}),{addQuery:Se}=M.actions,we=M.reducer,W=y({name:"finalQuery",initialState:{value:""},reducers:{addFinalQuery(s,r){s.value.startsWith(" ")?s.value=r.payload:s.value=" "+r.payload}}}),{addFinalQuery:O}=W.actions,Ne=W.reducer,B=y({name:"finalVariables",initialState:{value:"{}"},reducers:{addFinalVariables(s,r){s.value=r.payload}}}),{addFinalVariables:D}=B.actions,Fe=B.reducer,_e=ee({reducer:{variables:ye,response:be,query:we,finalQuery:Ne,finalVariables:Fe}}),ke={team:"Team",checkAuth:"Check auth",mainTitle:"Main page",mainInfo:"Section - editor, variables, headers (for query), documentation, response",welcomeTitle:"Welcome to our GraphiQL!",welcomeInfo:"Developers, project, course",welcomeTeam:"Our team on React-2023-Q1 course",welcomeDevs:"Eduard Nebolsin,Yury Shpakouski,Farkhod Kodirov",goMain:"Go to Main page",goWelcome:"Go to Welcome page",labelSignIn:"Sigh In",labelSignUp:"Sign Up",labelSignOut:"Sigh Out",labelEmail:"Email",labelPassword:"Password",errorInvalidEmail:"Invalid email",errorInvalidPassword:"Invalid password, must be 8-20 symbols, at least one letter, one digit, one special character",pageNotFound:"Page not found",footerTitle:"Footer",footerGithub:"Eduard Nebolsin Yury Shpakouski Farkhod Kodirov",footerInfo:"Link to authors github, app year, course logo with link to the course",userCreate:"User create & login",userLogin:"User login",userLogout:"User logout",errorFirebaseAuth:"Firebase auth error",errorFetch:"Fetch error",titleDoc:"Documentation",titleQuery:"Query",titleResponse:"Response",titleVar:"Variables",errorQuery:"Query error",errorEmptyQuery:"Empty query",errorsToResponse:"Errors message in response section",runButton:"Run",successQuery:"Successful query",successToResponse:"Results in response section",waitingForQueryResult:"Waiting for query result",docsLoading:"Docs loading"},Ie={team:"Команда",checkAuth:"Проверка авторизации",mainTitle:"Главная страница",mainInfo:"Секции - редактор, переменные, заголовки (для запроса), документация, ответ",welcomeTitle:"Добро пожаловать в наш GraphiQL!",welcomeInfo:"Разработчики, проект, курс",welcomeTeam:"Наша команда на курсе React-2023-Q1",welcomeDevs:"Эдуард Небольсин,Юрий Шпаковский,Фарход Кодиров",goMain:"На Главную страницу",goWelcome:"Перейти на страницу приветствия",labelSignIn:"Вход",labelSignUp:"Регистрация",labelSignOut:"Выход",labelEmail:"Адрес электронной почты",labelPassword:"Пароль",errorInvalidEmail:"Некорректный адрес электронной почты",errorInvalidPassword:"Пароль должен состоять из 8-20 символов, влючать хотя бы одну букву, одну цифру, один спец.символ",pageNotFound:"Страница не найдена",footerTitle:"Контакты",footerGithub:"Eduard Nebolsin Yury Shpakouski Farkhod Kodirov",footerInfo:"Ссылки на репо авторов, год публикации приложения, лого курса со ссылкой на него",userCreate:"Пользователь зарегистрирован",userLogin:"Вход пользователя",userLogout:"Выход пользователя",errorFirebaseAuth:"Ошибка аутентификации Firebase",errorFetch:"Ошибка получения данных",titleDoc:"Документация",titleQuery:"Запрос",titleResponse:"Ответ",titleVar:"Переменные",errorQuery:"Ошибка запроса",errorEmptyQuery:"Пустой текст запроса",errorsToResponse:"Сообщение об ошибке в разделе ответа",runButton:"Выполнить",successQuery:"Успешный запрос",successToResponse:"Результаты в разделе ответа",waitingForQueryResult:"Ожидание результата запроса",docsLoading:"Загрузка документации"};x.use(re).init({lng:localStorage.getItem("locale")||"en",debug:!1,resources:{en:{translation:ke},ru:{translation:Ie}}});function Ee(){const{t:s}=h(),r=w(),t=()=>{r("/")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"not_found",children:[e.jsx("h1",{children:s("pageNotFound")}),e.jsx(p,{onClick:t,children:s("goWelcome")})]})})}const z=new Map;function g(s,r,t){z.set(s,{en:r,ru:t})}function Pe(s){const r=x.resolvedLanguage,t=z.get(s);if(t){if(r=="en")return t.en;if(r=="ru")return t.ru}return s}g("auth/invalid-email","Invalid email","Некорректный адрес электронной почты");g("auth/email-already-in-use","Email address is already in use by another user","Адрес электронной почты уже используется другим пользователем");g("auth/wrong-password","Wrong password","Неправильный пароль");g("auth/user-not-found","User not found","Пользователь не найден");g("auth/network-request-failed","Network request failed, possibly no Internet connection ","Запрос к сети не удался, возможно нет подключения к Интернету ");g("auth/api-key-not-valid.-please-pass-a-valid-api-key.","API-key not valid or missing","API-ключ недействителен или отсутствует");g("Failed to fetch","Failed to fetch","Не удалось получить данные ");function R(){const s=new Date;return""+s.getHours()+":"+(s.getMinutes()<10?"0":"")+s.getMinutes()}function S(s,r){N.show({title:x.t(s),message:R()+" - "+x.t(r),autoClose:5e3,color:"green"})}function v(s,r){N.show({title:x.t(s),message:R()+" - "+x.t(Pe(r)),autoClose:5e3,color:"red"})}function Re(){const[s,r]=d.useState(localStorage.getItem("locale")||"en"),{i18n:t}=h(),i=a=>{r(a),t.changeLanguage(a),localStorage.setItem("locale",a)},n=()=>{s=="en"?i("ru"):i("en")},o="#228be6";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"locale_switcher",children:e.jsx(oe,{value:s,onChange:n,data:[{value:"en",label:e.jsx(T,{children:e.jsx(_,{sx:{color:s=="en"?o:""},children:"En"})})},{value:"ru",label:e.jsx(T,{children:e.jsx(_,{sx:{color:s=="ru"?o:""},children:"Рус"})})}]})})})}const Ce=""+new URL("logo-dcab8614.svg",import.meta.url).href;function Le(){const{t:s}=h(),r=w(),t=te(),i=I(),[n,o]=P(i),a=()=>{r("/auth")},l=()=>{const Q=n==null?void 0:n.email;i.signOut().then(()=>{S("userLogout",""+Q),r("/auth")})},u=()=>{r("/")},c=()=>{r("/main")},m=!n&&!o,[f,C]=d.useState(!1);d.useEffect(()=>(window.addEventListener("scroll",L),()=>{window.removeEventListener("scroll",L)}));const L=()=>{window.scrollY>0?C(!0):C(!1)};return e.jsx(e.Fragment,{children:e.jsxs("header",{className:`header_app ${f?"is-sticky":""}`,children:[e.jsxs("h2",{children:[e.jsx("img",{className:"header_logo",src:Ce,alt:"Project logo"}),"GraphiQL - ",s("team")," #6"]}),e.jsxs("div",{className:"header_buttons",children:[e.jsx(Re,{}),m&&t.pathname!="/auth"&&e.jsxs(p,{onClick:a,className:"header_sign_button",children:[s("labelSignIn")," / ",s("labelSignUp")]}),m&&t.pathname=="/auth"&&e.jsx(p,{onClick:u,className:"header_sign_button",children:s("goWelcome")}),n&&!o&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"header_user",children:[e.jsx(ae,{radius:"xl"}),e.jsx("div",{children:n.email})]})}),e.jsxs("div",{className:"header_group",children:[n&&!o&&e.jsx(e.Fragment,{children:e.jsx(p,{onClick:l,className:"header_sign_button",children:s("labelSignOut")})}),!m&&t.pathname=="/"&&e.jsx(p,{onClick:c,className:"header_button",children:s("goMain")})]})]})]})})}function Qe(){return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:"footer_app",children:[e.jsxs("div",{className:"footer_githubs",children:[e.jsx("img",{src:"./github.svg",height:28}),e.jsx("a",{href:"https://github.com/edumgtk2020",children:"edumgtk2020"})," |"," ",e.jsx("a",{href:"https://github.com/Clukva",children:"Clukva"})," |"," ",e.jsx("a",{href:"https://github.com/fkodirov",children:"fkodirov"})]}),e.jsx("p",{className:"footer_year",children:"2023"}),e.jsx("a",{href:"https://rs.school/react/",className:"footer_logo",children:e.jsx("img",{src:"./rs-school.svg",alt:"RS School",height:28})})]})})}function Ae(){const{t:s}=h(),r=E();return e.jsxs(e.Fragment,{children:[e.jsx("textarea",{className:"textarea_query ",onChange:t=>r(Se(`${t.target.value}`))}),e.jsx(b,{defaultValue:"customization",transitionDuration:500,children:e.jsxs(b.Item,{value:"customization",children:[e.jsx(b.Control,{children:e.jsx("b",{children:s("titleVar")})}),e.jsxs(b.Panel,{children:[e.jsx("textarea",{className:"textarea var-textarea",onChange:t=>r(ve(`${t.target.value}`))})," "]})]})})]})}function Te(){const{t:s}=h(),r=E(),t=j(a=>a.query.value),i=j(a=>a.variables.value);function n(a){try{return JSON.parse(a),!0}catch{return!1}}function o(){if(r(k("{}")),!t.trim()){r(O("")),N.show({title:s("errorQuery"),message:R()+" - "+s("errorEmptyQuery"),autoClose:5e3,color:"red"});return}r(O(t)),n(i)?r(D(i)):r(D("{}"))}return e.jsx(e.Fragment,{children:e.jsx(p,{className:"run-button",onClick:o,children:s("runButton")})})}const F=({children:s})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"loader",children:[e.jsx(ie,{size:"xl",variant:"dots"}),s&&e.jsx("h4",{children:s})]})}),$e="modulepreload",Oe=function(s,r){return new URL(s,r).href},U={},De=function(r,t,i){if(!t||t.length===0)return r();const n=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=Oe(o,i),o in U)return;U[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!i)for(let m=n.length-1;m>=0;m--){const f=n[m];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":$e,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((m,f)=>{c.addEventListener("load",m),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>r())};const Ue=d.lazy(()=>De(()=>import("./DocumentationPanel-78e4541a.js"),["./DocumentationPanel-78e4541a.js","./react-d84e5e68.js","./fast-deep-equal-4802929f.js","./react18-json-view-23fa606a.js","./react18-json-view-af63fc84.css","./graphql-4c55ded1.js","./uuid-cf522c50.js","./react-dom-8b7ac5e7.js","./scheduler-765c72db.js","./react-router-dom-c468db3a.js","./react-router-1b3d7f17.js","./@remix-run-073e1ff6.js","./firebase-36553ef7.js","./@firebase-7dbc1d44.js","./idb-81bdbf9b.js","./react-redux-da7aad8d.js","./hoist-non-react-statics-23d96a9a.js","./react-is-e8e5dbb3.js","./use-sync-external-store-2f415742.js","./@reduxjs-cea49342.js","./immer-41fd5235.js","./redux-68a1e360.js","./@babel-3718bade.js","./redux-thunk-ef899f4c.js","./i18next-0d064a9e.js","./react-i18next-5447eeb6.js","./@mantine-15603970.js","./clsx-de421188.js","./@emotion-82461379.js","./stylis-79144faa.js","./react-transition-group-c81f1626.js","./klona-192252da.js","./react-firebase-hooks-7c3c1dd0.js","./react-error-boundary-700e06bd.js"],import.meta.url));function Ve(){return e.jsx(e.Fragment,{children:e.jsx(pe,{fallbackRender:qe,children:e.jsx(d.Suspense,{fallback:e.jsx(F,{children:se("docsLoading")}),children:e.jsx(Ue,{})})})})}function qe(s){return v("errorFetch",s.error.message),e.jsx(e.Fragment,{})}function Me(s){let r="pending",t;const i=s.then(o=>{r="success",t=o},o=>{r="error",t=o});return{read:()=>{switch(r){case"pending":throw i;case"error":throw t;default:return t}}}}const We="https://rickandmortyapi.com/graphql";async function G(s,r){return fetch(We,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({query:s,variables:r})})}function Be(s,r){return G(s.trim(),r)}function Rs(){const s=fe(),r=G(s,"").then(t=>t.json());return Me(r)}function ze(){const{t:s}=h(),r=j(l=>l.finalQuery.value),t=j(l=>l.finalVariables.value),i=j(l=>l.response.value),[n,o]=d.useState(),a=E();return d.useEffect(()=>{r.trim()?Be(r,JSON.parse(t)).then(l=>l.json()).then(l=>{o(l),a(k(JSON.stringify(l))),l!=null&&l.errors?v("errorQuery","errorsToResponse"):S("successQuery","successToResponse")}).catch(l=>{v("errorFetch",l.message),a(k(""))}):o(void 0)},[r,t,a]),d.useEffect(()=>{i=="{}"&&o(void 0)},[i]),i=="{}"&&r.trim()?e.jsx(e.Fragment,{children:e.jsx(F,{children:s("waitingForQueryResult")})}):n?e.jsx(e.Fragment,{children:e.jsx("div",{className:"res_container",children:e.jsx("div",{className:"res_item",children:e.jsx(ge,{src:n,enableClipboard:!1})})})}):null}function Ge(){return e.jsx(e.Fragment,{children:e.jsx(ze,{})})}function He(){const{t:s}=h();localStorage.setItem("typeStack","");const r=w(),t=I(),[i,n]=P(t);return d.useEffect(()=>{!i&&!n&&r("/",{replace:!0})}),n?e.jsx(F,{children:s("checkAuth")}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"main",children:[e.jsxs("div",{className:"main_docs",children:[e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:s("titleDoc")})}),e.jsx(Ve,{})]}),e.jsxs("div",{className:"main_request",children:[e.jsx("div",{className:"main_query",children:e.jsxs("div",{className:"main_header",children:[e.jsx("div",{className:"main_title",children:s("titleQuery")}),e.jsx(Te,{})]})}),e.jsx(Ae,{})]}),e.jsxs("div",{className:"main_response",children:[e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:s("titleResponse")})}),e.jsx(Ge,{})]})]})})}function Je(){const{t:s}=h();return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"welcome",children:[e.jsx("h1",{children:s("welcomeTitle")}),e.jsx("h2",{children:s("welcomeTeam")}),e.jsxs("div",{className:"welcome_devs",children:[e.jsxs("div",{className:"dev",children:[e.jsx("img",{src:"./dev2.png",alt:"developer",height:100}),e.jsx("p",{children:s("welcomeDevs").split(",")[0]})]}),e.jsxs("div",{className:"dev",children:[e.jsx("img",{src:"./dev2.png",alt:"developer",height:100}),e.jsx("p",{children:s("welcomeDevs").split(",")[1]})]}),e.jsxs("div",{className:"dev",children:[e.jsx("img",{src:"./dev2.png",alt:"developer",height:100}),e.jsx("p",{children:s("welcomeDevs").split(",")[2]})]})]})]})})}function Ke(){const{t:s}=h(),r=w(),t=I(),[i,n]=P(t),o=async()=>{a()&&Y(t,u.values.email,u.values.password).then(c=>{S("userLogin",""+c.user.email)}).catch(c=>{v("errorFirebaseAuth",c.code)})},a=()=>Object.keys(u.errors).length===0,l=()=>{N.clean(),a()&&Z(t,u.values.email,u.values.password).then(c=>{S("userCreate",""+c.user.email)}).catch(c=>{v("errorFirebaseAuth",c.code)})};d.useEffect(()=>{i&&!n&&r("/main",{replace:!0})});const u=le({validateInputOnChange:!0,initialValues:{email:"",password:""},validate:{password:c=>/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d][A-Za-z\d!@#$%^&*()_+]{7,19}$/.test(c)?null:s("errorInvalidPassword"),email:c=>/^\S+@\S+$/.test(c)?null:s("errorInvalidEmail")}});return i&&n?e.jsx(F,{children:s("checkAuth")}):e.jsx("div",{className:"sign_in_up",children:e.jsx(_,{className:"sign_in_up_inputs",children:e.jsxs("form",{onSubmit:u.onSubmit(()=>{}),children:[e.jsxs($,{direction:"column",children:[e.jsx(ce,{label:s("labelEmail"),placeholder:""+s("labelEmail"),...u.getInputProps("email")}),e.jsx(ue,{label:s("labelPassword"),placeholder:""+s("labelPassword"),...u.getInputProps("password")})]}),e.jsx(de,{h:"md"}),e.jsxs($,{gap:"md",justify:"center",children:[e.jsx(p,{className:"sign_in_up_button",type:"submit",onClick:o,children:s("labelSignIn")}),e.jsx(p,{className:"sign_in_up_button",type:"submit",onClick:l,variant:"outline",children:s("labelSignUp")})]})]})})})}const Ye=[{path:"/",link:"Welcome",name:"Welcome page",element:e.jsx(Je,{})},{path:"/main",link:"Main",name:"Main page",element:e.jsx(He,{})},{path:"/auth",link:"SignIn/SignUp",name:"Sign page",element:e.jsx(Ke,{})}];function Ze(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"page_layout",children:[e.jsx(Le,{}),e.jsxs(ne,{children:[Ye.map(s=>d.createElement(A,{...s,key:xe()})),e.jsx(A,{path:"*",element:e.jsx(Ee,{})})]}),e.jsx(Qe,{})]})})}H.createRoot(document.getElementById("root")).render(e.jsx(X,{store:_e,children:e.jsxs(me,{withGlobalStyles:!0,withNormalizeCSS:!0,children:[e.jsx(he,{position:"bottom-right"}),e.jsx(je,{children:e.jsx(J,{children:e.jsx(Ze,{})})})]})}));export{Rs as f};
