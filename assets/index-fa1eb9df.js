import{j as e,r as p,a as A}from"./react-d84e5e68.js";import{c as M}from"./react-dom-8b7ac5e7.js";import{H as W}from"./react-router-dom-c468db3a.js";import"./firebase-36553ef7.js";import{i as z,g as N,s as G,c as B}from"./@firebase-7dbc1d44.js";import{u as R,a as S,P as H}from"./react-redux-da7aad8d.js";import{c as v,a as K}from"./@reduxjs-cea49342.js";import{i as $}from"./i18next-18031c15.js";import{i as J,u as h}from"./react-i18next-5447eeb6.js";import{u as j,a as Y,b as Z,c as k}from"./react-router-1b3d7f17.js";import{B as d,S as X,C as I,a as F,A as ee,n as g,b as y,L as se,u as te,F as C,T as ae,P as re,c as ne,M as oe,N as ie}from"./@mantine-15603970.js";import{u as _}from"./react-firebase-hooks-7c3c1dd0.js";import"./hoist-non-react-statics-23d96a9a.js";import{v as le}from"./uuid-cf522c50.js";import"./fast-deep-equal-4802929f.js";import"./scheduler-765c72db.js";import"./@remix-run-073e1ff6.js";import"./idb-81bdbf9b.js";import"./use-sync-external-store-2f415742.js";import"./immer-41fd5235.js";import"./redux-68a1e360.js";import"./@babel-3718bade.js";import"./redux-thunk-ef899f4c.js";import"./clsx-de421188.js";import"./@emotion-82461379.js";import"./stylis-79144faa.js";import"./react-transition-group-c81f1626.js";import"./klona-192252da.js";import"./react-is-e8e5dbb3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}})();z({apiKey:"AIzaSyB_5MCwcB7MJute_P3TZYHaMOH17CrmrIc"});const ce=({children:s})=>e.jsx(e.Fragment,{children:s}),O=v({name:"variables",initialState:{value:"{}"},reducers:{addVariables(s,t){s.value=t.payload}}}),{addVariables:ue}=O.actions,de=O.reducer,T=v({name:"response",initialState:{value:"{}"},reducers:{addResponse(s,t){s.value=t.payload}}}),{addResponse:gs}=T.actions,me=T.reducer,V=v({name:"query",initialState:{value:`query {
      characters{results{status}
        results{
          name
        }
      }
      }`},reducers:{addQuery(s,t){s.value=t.payload}}}),{addQuery:he}=V.actions,ge=V.reducer,q=v({name:"finalQuery",initialState:{value:`query {
        characters{results{status}
          results{
            name
          }
        }
        }`},reducers:{addFinalQuery(s,t){s.value=t.payload}}}),{addFinalQuery:pe}=q.actions,fe=q.reducer,U=v({name:"finalVariables",initialState:{value:"{}"},reducers:{addFinalVariables(s,t){s.value=t.payload}}}),{addFinalVariables:P}=U.actions,xe=U.reducer,ve=K({reducer:{variables:de,response:me,query:ge,finalQuery:fe,finalVariables:xe}}),je={team:"Team",checkAuth:"Check auth...",mainTitle:"Main page",mainInfo:"Section - editor, variables, headers (for query), documentation, response",welcomeTitle:"Welcome to our GraphiQL!",welcomeInfo:"Developers, project, course",welcomeTeam:"Our team on React-2023-Q1 course",welcomeDevs:"Eduard Nebolsin,Yury Shpakouski,Farkhod Kodirov",goMain:"Go to Main page",goWelcome:"Go to Welcome page",labelSignIn:"Sigh In",labelSignUp:"Sign Up",labelSignOut:"Sigh Out",labelEmail:"Email",labelPassword:"Password",errorInvalidEmail:"Invalid email",errorInvalidPassword:"Invalid password, must be 8-20 symbols, at least one letter, one digit, one special character",pageNotFound:"Page not found",footerTitle:"Footer",footerGithub:"Eduard Nebolsin Yury Shpakouski Farkhod Kodirov",footerInfo:"Link to authors github, app year, course logo with link to the course",userCreate:"User create & login",userLogin:"User login",userLogout:"User logout",errorFirebaseAuth:"Firebase auth error",errorFetch:"Fetch error",titleDoc:"Documentation",titleQuery:"Query",titleResponse:"Response",titleVar:"Variables"},be={team:"Команда",checkAuth:"Проверка авторизации...",mainTitle:"Главная страница",mainInfo:"Секции - редактор, переменные, заголовки (для запроса), документация, ответ",welcomeTitle:"Добро пожаловать в наш GraphiQL!",welcomeInfo:"Разработчики, проект, курс",welcomeTeam:"Наша команда на курсе React-2023-Q1",welcomeDevs:"Эдуард Небольсин,Юрий Шпаковский,Фарход Кодиров",goMain:"Перейти на Главную страницу",goWelcome:"Перейти на страницу приветствия",labelSignIn:"Вход",labelSignUp:"Регистрация",labelSignOut:"Выход",labelEmail:"Адрес электронной почты",labelPassword:"Пароль",errorInvalidEmail:"Некорректный адрес электронной почты",errorInvalidPassword:"Пароль должен состоять из 8-20 символов, влючать хотя бы одну букву, одну цифру, один спец.символ",pageNotFound:"Страница не найдена",footerTitle:"Контакты",footerGithub:"Eduard Nebolsin Yury Shpakouski Farkhod Kodirov",footerInfo:"Ссылки на репо авторов, год публикации приложения, лого курса со ссылкой на него",userCreate:"Пользователь зарегистрирован",userLogin:"Вход пользователя",userLogout:"Выход пользователя",errorFirebaseAuth:"Ошибка аутентификации Firebase",errorFetch:"Ошибка получения данных",titleDoc:"Документация",titleQuery:"Запрос",titleResponse:"Ответ",titleVar:"Переменные"};$.use(J).init({lng:"en",debug:!1,resources:{en:{translation:je},ru:{translation:be}}});function ye(){const{t:s}=h(),t=j(),a=()=>{t("/")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"not_found",children:[e.jsx("h1",{children:s("pageNotFound")}),e.jsx(d,{onClick:a,children:s("goWelcome")})]})})}function x(){const s=new Date;return""+s.getHours()+":"+(s.getMinutes()<10?"0":"")+s.getMinutes()}function Se(){const[s,t]=p.useState("en"),{i18n:a}=h(),i=()=>{s=="en"?(t("ru"),a.changeLanguage("ru")):(t("en"),a.changeLanguage("en"))},r="#228be6";return e.jsx(e.Fragment,{children:e.jsx(X,{value:s,onChange:i,data:[{value:"en",label:e.jsx(I,{children:e.jsx(F,{sx:{color:s=="en"?r:""},children:"En"})})},{value:"ru",label:e.jsx(I,{children:e.jsx(F,{sx:{color:s=="ru"?r:""},children:"Рус"})})}]})})}const Ne=""+new URL("logo-dcab8614.svg",import.meta.url).href;function _e(){const{t:s}=h(),t=j(),a=Y(),i=N(),[r,n]=_(i),l=()=>{t("/auth")},u=()=>{const m=r==null?void 0:r.email;i.signOut().then(()=>{g.show({title:s("userLogout"),message:x()+" - "+m,autoClose:!0,color:"green"}),t("/auth")})},c=()=>{t("/")},o=!r&&!n;return e.jsx(e.Fragment,{children:e.jsxs("header",{className:"header_app",children:[e.jsxs("h2",{children:[e.jsx("img",{className:"header_logo",src:Ne,alt:"Project logo"}),"GraphiQL - ",s("team")," #6"]}),e.jsxs("div",{className:"header_buttons",children:[e.jsx(Se,{}),o&&a.pathname!="/auth"&&e.jsxs(d,{onClick:l,className:"header_sign_button",children:[s("labelSignIn")," / ",s("labelSignUp")]}),o&&a.pathname=="/auth"&&e.jsx(d,{onClick:c,className:"header_sign_button",children:s("goWelcome")}),r&&!n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"header_user",children:[e.jsx(ee,{radius:"xl"}),e.jsx("div",{children:r.email})]}),e.jsx(d,{onClick:u,className:"header_sign_button",children:s("labelSignOut")})]})]})]})})}function we(){return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:"footer_app",children:[e.jsxs("div",{className:"footer_githubs",children:[e.jsx("img",{src:"./github.svg"})," ",e.jsx("a",{href:"https://github.com/edumgtk2020",children:"edumgtk2020"})," |"," ",e.jsx("a",{href:"https://github.com/Clukva",children:"Clukva"})," |"," ",e.jsx("a",{href:"https://github.com/fkodirov",children:"fkodirov"})]}),e.jsx("p",{className:"footer_year",children:"2023"}),e.jsx("a",{href:"https://rs.school/react/",className:"footer_logo",children:e.jsx("img",{src:"./rs-school.svg",alt:"RS School",height:28})})]})})}function Fe(){const{t:s}=h(),t=R();return e.jsxs(e.Fragment,{children:[e.jsx("textarea",{defaultValue:`query {
        characters{results{status}
          results{
            name
          }
        }
        }`,className:"textarea_query ",onChange:a=>t(he(`${a.target.value}`))}),e.jsx(y,{defaultValue:"customization",transitionDuration:500,children:e.jsxs(y.Item,{value:"customization",children:[e.jsx(y.Control,{children:e.jsx("b",{children:s("titleVar")})}),e.jsxs(y.Panel,{children:[e.jsx("textarea",{className:"textarea var-textarea",onChange:a=>t(ue(`${a.target.value}`))})," "]})]})})]})}function ke(){const s=R(),t=S(n=>n.query.value),a=S(n=>n.variables.value);function i(n){try{return JSON.parse(n),!0}catch{return!1}}function r(){s(pe(t)),i(a)?s(P(a)):s(P("{}"))}return e.jsx(e.Fragment,{children:e.jsx(d,{className:"run-button",onClick:r,children:"Run"})})}const w=({children:s})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"loader",children:[e.jsx(se,{size:"xl",variant:"dots"}),s&&e.jsx("h4",{children:s})]})}),Ie="modulepreload",Ce=function(s,t){return new URL(s,t).href},L={},D=function(t,a,i){if(!a||a.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(a.map(n=>{if(n=Ce(n,i),n in L)return;L[n]=!0;const l=n.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!i)for(let m=r.length-1;m>=0;m--){const b=r[m];if(b.href===n&&(!l||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${u}`))return;const o=document.createElement("link");if(o.rel=l?"stylesheet":Ie,l||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),l)return new Promise((m,b)=>{o.addEventListener("load",m),o.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};const Pe=A.lazy(()=>D(()=>import("./DocumentationPanel-2a1129d9.js"),["./DocumentationPanel-2a1129d9.js","./react-d84e5e68.js","./fast-deep-equal-4802929f.js","./react18-json-view-23fa606a.js","./react18-json-view-af63fc84.css","./rickAndMorty-9fbbdd97.js","./react-i18next-5447eeb6.js","./@babel-3718bade.js","./@mantine-15603970.js","./react-dom-8b7ac5e7.js","./scheduler-765c72db.js","./clsx-de421188.js","./@emotion-82461379.js","./hoist-non-react-statics-23d96a9a.js","./react-is-e8e5dbb3.js","./stylis-79144faa.js","./react-transition-group-c81f1626.js","./klona-192252da.js","./react-router-dom-c468db3a.js","./react-router-1b3d7f17.js","./@remix-run-073e1ff6.js","./firebase-36553ef7.js","./@firebase-7dbc1d44.js","./idb-81bdbf9b.js","./react-redux-da7aad8d.js","./use-sync-external-store-2f415742.js","./@reduxjs-cea49342.js","./immer-41fd5235.js","./redux-68a1e360.js","./redux-thunk-ef899f4c.js","./i18next-18031c15.js","./react-firebase-hooks-7c3c1dd0.js","./uuid-cf522c50.js"],import.meta.url));function Le(){return e.jsx(e.Fragment,{children:e.jsx(p.Suspense,{fallback:e.jsx(w,{children:"Docs loading..."}),children:e.jsx(Pe,{})})})}const Ee=A.lazy(()=>D(()=>import("./ResponsePanel-9734c56f.js"),["./ResponsePanel-9734c56f.js","./react-d84e5e68.js","./fast-deep-equal-4802929f.js","./react18-json-view-23fa606a.js","./react18-json-view-af63fc84.css","./rickAndMorty-9fbbdd97.js","./react-redux-da7aad8d.js","./react-dom-8b7ac5e7.js","./scheduler-765c72db.js","./hoist-non-react-statics-23d96a9a.js","./react-is-e8e5dbb3.js","./use-sync-external-store-2f415742.js","./react-router-dom-c468db3a.js","./react-router-1b3d7f17.js","./@remix-run-073e1ff6.js","./firebase-36553ef7.js","./@firebase-7dbc1d44.js","./idb-81bdbf9b.js","./@reduxjs-cea49342.js","./immer-41fd5235.js","./redux-68a1e360.js","./@babel-3718bade.js","./redux-thunk-ef899f4c.js","./i18next-18031c15.js","./react-i18next-5447eeb6.js","./@mantine-15603970.js","./clsx-de421188.js","./@emotion-82461379.js","./stylis-79144faa.js","./react-transition-group-c81f1626.js","./klona-192252da.js","./react-firebase-hooks-7c3c1dd0.js","./uuid-cf522c50.js"],import.meta.url));function Ae(s){return e.jsx(e.Fragment,{children:e.jsx(p.Suspense,{fallback:e.jsx(w,{children:"Loading..."}),children:e.jsx(Ee,{query:s.query,variables:s.variables})})})}function Re(){const s=S(u=>u.finalQuery.value),t=S(u=>u.finalVariables.value),{t:a}=h(),i=j(),r=N(),[n,l]=_(r);return p.useEffect(()=>{!n&&!l&&i("/",{replace:!0})}),l?e.jsx(w,{children:a("checkAuth")}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"main",children:[e.jsxs("div",{className:"main_docs",children:[e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:a("titleDoc")})}),e.jsx(Le,{})]}),e.jsxs("div",{className:"main_request",children:[e.jsx("div",{className:"main_query",children:e.jsxs("div",{className:"main_header",children:[e.jsx("div",{className:"main_title",children:a("titleQuery")}),e.jsx(ke,{})]})}),e.jsx(Fe,{})]}),e.jsxs("div",{className:"main_response",children:[e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:a("titleResponse")})}),e.jsx(Ae,{query:s,variables:JSON.parse(t)})]})]})})}function $e(){const{t:s}=h(),t=j(),a=N(),[i,r]=_(a),n=()=>{t("/main")};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"welcome",children:[e.jsx("h1",{children:s("welcomeTitle")}),e.jsx("h2",{children:s("welcomeTeam")}),e.jsxs("div",{className:"welcome_devs",children:[e.jsxs("div",{className:"dev",children:[e.jsx("img",{src:"./dev2.png",alt:"developer",height:100}),e.jsx("p",{children:s("welcomeDevs").split(",")[0]})]}),e.jsxs("div",{className:"dev",children:[e.jsx("img",{src:"./dev2.png",alt:"developer",height:100}),e.jsx("p",{children:s("welcomeDevs").split(",")[1]})]}),e.jsxs("div",{className:"dev",children:[e.jsx("img",{src:"./dev2.png",alt:"developer",height:100}),e.jsx("p",{children:s("welcomeDevs").split(",")[2]})]})]}),i&&!r&&e.jsx(d,{onClick:n,children:s("goMain")})]})})}const Q=new Map;function f(s,t,a){Q.set(s,{en:t,ru:a})}function E(s){const t=$.resolvedLanguage,a=Q.get(s);if(a){if(t=="en")return a.en;if(t=="ru")return a.ru}return s}f("auth/invalid-email","Invalid email","Некорректный адрес электронной почты");f("auth/email-already-in-use","Email address is already in use by another user","Адрес электронной почты уже используется другим пользователем");f("auth/wrong-password","Wrong password","Неправильный пароль");f("auth/user-not-found","User not found","Пользователь не найден");f("auth/network-request-failed","Network request failed, possibly no Internet connection ","Запрос к сети не удался, возможно нет подключения к Интернету ");f("Failed to fetch","Failed to fetch","Не удалось получить данные ");function Oe(){const{t:s}=h(),t=j(),a=N(),[i,r]=_(a),n=async()=>{l()&&G(a,c.values.email,c.values.password).then(o=>{g.show({title:s("userLogin"),message:x()+" - "+o.user.email,autoClose:!0,color:"green"})}).catch(o=>{g.show({title:s("errorFirebaseAuth"),message:x()+" - "+E(o.code),autoClose:2e4,color:"red"})})},l=()=>Object.keys(c.errors).length===0,u=()=>{g.clean(),l()&&B(a,c.values.email,c.values.password).then(o=>{g.show({title:s("userCreate"),message:x()+" - "+o.user.email,autoClose:!0,color:"green"})}).catch(o=>{g.show({title:s("errorFirebaseAuth"),message:x()+" - "+E(o.code),autoClose:2e4,color:"red"})})};p.useEffect(()=>{i&&!r&&t("/main",{replace:!0})});const c=te({validateInputOnChange:!0,initialValues:{email:"",password:""},validate:{password:o=>/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d][A-Za-z\d!@#$%^&*()_+]{7,19}$/.test(o)?null:s("errorInvalidPassword"),email:o=>/^\S+@\S+$/.test(o)?null:s("errorInvalidEmail")}});return i&&r?e.jsx(w,{children:s("checkAuth")}):e.jsx("div",{className:"sign_in_up",children:e.jsx(F,{className:"sign_in_up_inputs",children:e.jsxs("form",{onSubmit:c.onSubmit(()=>{}),children:[e.jsxs(C,{direction:"column",children:[e.jsx(ae,{label:s("labelEmail"),placeholder:""+s("labelEmail"),...c.getInputProps("email")}),e.jsx(re,{label:s("labelPassword"),placeholder:""+s("labelPassword"),...c.getInputProps("password")})]}),e.jsx(ne,{h:"md"}),e.jsxs(C,{gap:"md",justify:"center",children:[e.jsx(d,{className:"sign_in_up_button",type:"submit",onClick:n,children:s("labelSignIn")}),e.jsx(d,{className:"sign_in_up_button",type:"submit",onClick:u,variant:"outline",children:s("labelSignUp")})]})]})})})}const Te=[{path:"/",link:"Welcome",name:"Welcome page",element:e.jsx($e,{})},{path:"/main",link:"Main",name:"Main page",element:e.jsx(Re,{})},{path:"/auth",link:"SignIn/SignUp",name:"Sign page",element:e.jsx(Oe,{})}];function Ve(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"page_layout",children:[e.jsx(_e,{}),e.jsxs(Z,{children:[Te.map(s=>p.createElement(k,{...s,key:le()})),e.jsx(k,{path:"*",element:e.jsx(ye,{})})]}),e.jsx(we,{})]})})}M.createRoot(document.getElementById("root")).render(e.jsx(H,{store:ve,children:e.jsxs(oe,{withGlobalStyles:!0,withNormalizeCSS:!0,children:[e.jsx(ie,{position:"top-center"}),e.jsx(ce,{children:e.jsx(W,{children:e.jsx(Ve,{})})})]})}));export{gs as a,x as c,E as e};
