import{r as g,j as e,a as P}from"./react-d84e5e68.js";import{c as L}from"./react-dom-8b7ac5e7.js";import{H as E}from"./react-router-dom-c468db3a.js";import{i as k,g as x,s as M,c as U}from"./@firebase-7dbc1d44.js";import"./firebase-36553ef7.js";import{i as F}from"./i18next-81a9e9b1.js";import{i as T,u as m}from"./react-i18next-30f3ddb2.js";import{u as j,a as O,b as W,c as S}from"./react-router-1b3d7f17.js";import{B as u,S as $,C as I,a as w,A as R,n as h,b as d,L as z,u as H,F as _,T as D,P as q,c as B,M as G,N as V}from"./@mantine-db5b2ac1.js";import{u as b}from"./react-firebase-hooks-7c3c1dd0.js";import{v as Z}from"./uuid-cf522c50.js";import"./fast-deep-equal-4802929f.js";import"./scheduler-765c72db.js";import"./@remix-run-073e1ff6.js";import"./idb-81bdbf9b.js";import"./@babel-8f34527c.js";import"./clsx-de421188.js";import"./@emotion-b857b527.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./stylis-79144faa.js";import"./react-transition-group-5a3e3d43.js";import"./klona-192252da.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}})();k({apiKey:"AIzaSyB_5MCwcB7MJute_P3TZYHaMOH17CrmrIc"});const K=({children:n})=>{const s=x();return g.useEffect(()=>s.onAuthStateChanged(r=>{console.log(r)}),[s]),e.jsx(e.Fragment,{children:n})},Q={team:"Team",checkAuth:"Check auth...",mainTitle:"Main page",mainInfo:"Section - editor, variables, headers (for query), documentation, response",welcomeTitle:"Welcome page",welcomeInfo:"Developers, project, course",goMain:"Go to Main page",goWelcome:"Go to Welcome page",labelSignIn:"Sigh In",labelSignUp:"Sign Up",labelSignOut:"Sigh Out",labelEmail:"Email",labelPassword:"Password",errorInvalidEmail:"Invalid email",errorInvalidPassword:"Invalid password, must be 8-20 symbols, at least one letter, one digit, one special character",pageNotFound:"Page not found",footerTitle:"Footer",footerInfo:"Link to authors github, app year, course logo with link to the course",userCreate:"User create & login",userLogin:"User login",userLogout:"User logout",errorFirebaseAuth:"Firebase auth error"},J={team:"Команда",checkAuth:"Проверка авторизации...",mainTitle:"Главная страница",mainInfo:"Секции - редактор, переменные, заголовки (для запроса), документация, ответ",welcomeTitle:"Страница приветствия",welcomeInfo:"Разработчики, проект, курс",goMain:"Перейти на Главную страницу",goWelcome:"Перейти на страницу приветствия",labelSignIn:"Вход",labelSignUp:"Регистрация",labelSignOut:"Выход",labelEmail:"Адрес электронной почты",labelPassword:"Пароль",errorInvalidEmail:"Некорректный адрес электронной почты",errorInvalidPassword:"Пароль должен состоять из 8-20 символов, влючать хотя бы одну букву, одну цифру, один спец.символ",pageNotFound:"Страница не найдена",footerTitle:"Контакты",footerInfo:"Ссылки на репо авторов, год публикации приложения, лого курса со ссылкой на него",userCreate:"Пользователь зарегистрирован",userLogin:"Вход пользователя",userLogout:"Выход пользователя",errorFirebaseAuth:"Ошибка аутентификации Firebase"};F.use(T).init({lng:"en",debug:!1,resources:{en:{translation:Q},ru:{translation:J}}});function Y(){const{t:n}=m(),s=j(),a=()=>{s("/")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"not_found",children:[e.jsx("h1",{children:n("pageNotFound")}),e.jsx(u,{onClick:a,children:n("goWelcome")})]})})}function p(){const n=new Date;return""+n.getHours()+":"+(n.getMinutes()<10?"0":"")+n.getMinutes()}function X(){const[n,s]=g.useState("en"),{i18n:a}=m(),r=()=>{n=="en"?(s("ru"),a.changeLanguage("ru")):(s("en"),a.changeLanguage("en"))},t="#228be6";return e.jsx(e.Fragment,{children:e.jsx($,{value:n,onChange:r,data:[{value:"en",label:e.jsx(I,{children:e.jsx(w,{sx:{color:n=="en"?t:""},children:"En"})})},{value:"ru",label:e.jsx(I,{children:e.jsx(w,{sx:{color:n=="ru"?t:""},children:"Рус"})})}]})})}function ee(){const{t:n}=m(),s=j(),a=O(),r=x(),[t,o]=b(r),c=()=>{s("/auth")},v=()=>{const C=t==null?void 0:t.email;r.signOut().then(()=>{h.show({title:n("userLogout"),message:p()+" - "+C,autoClose:!0,color:"green"}),s("/auth")})},l=()=>{s("/")},i=!t&&!o;return e.jsx(e.Fragment,{children:e.jsxs("header",{className:"header_app",children:[e.jsxs("h2",{children:["GraphiQL - ",n("team")," #6"]}),e.jsxs("div",{className:"header_buttons",children:[e.jsx(X,{}),i&&a.pathname!="/auth"&&e.jsxs(u,{onClick:c,className:"header_sign_button",children:[n("labelSignIn")," / ",n("labelSignUp")]}),i&&a.pathname=="/auth"&&e.jsx(u,{onClick:l,className:"header_sign_button",children:n("goWelcome")}),t&&!o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"header_user",children:[e.jsx(R,{radius:"xl"}),e.jsx("div",{children:t.email})]}),e.jsx(u,{onClick:v,className:"header_sign_button",children:n("labelSignOut")})]})]})]})})}function ne(){const{t:n}=m();return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:"footer_app",children:[e.jsx("h2",{children:n("footerTitle")}),e.jsx("p",{children:n("footerInfo")})]})})}function te(){return e.jsxs(d,{defaultValue:"customization",transitionDuration:500,children:[e.jsxs(d.Item,{value:"customization",children:[e.jsx(d.Control,{children:e.jsx("b",{children:"Variables"})}),e.jsx(d.Panel,{children:e.jsx("textarea",{className:"textarea"})})]}),e.jsxs(d.Item,{value:"flexibility",children:[e.jsx(d.Control,{children:e.jsx("b",{children:"Headers"})}),e.jsx(d.Panel,{children:e.jsx("textarea",{className:"textarea"})})]})]})}const N=({children:n})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"loader",children:[e.jsx(z,{size:"xl",variant:"dots"}),n&&e.jsx("h4",{children:n})]})});function se(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"docs_container",children:"Documentation"})})}function ae(){const{t:n}=m(),s=j(),a=x(),[r,t]=b(a);return g.useEffect(()=>{!r&&!t&&s("/auth",{replace:!0})}),t?e.jsx(N,{children:n("checkAuth")}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"main",children:[e.jsxs("div",{className:"main_docs",children:[e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:"Documentation"})}),e.jsx(g.Suspense,{fallback:e.jsx(N,{children:"Загрузка..."}),children:e.jsx(se,{})})]}),e.jsxs("div",{className:"main_request",children:[e.jsx("div",{className:"main_query",children:e.jsxs("div",{className:"main_header",children:[e.jsx("div",{className:"main_title",children:"Query"}),e.jsx(u,{children:"Run"})]})}),e.jsx("textarea",{}),e.jsx(te,{})]}),e.jsx("div",{className:"main_response",children:e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:"Response"})})})]})})}function oe(){const{t:n}=m(),s=j(),a=x(),[r,t]=b(a),o=()=>{s("/main")};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"welcome",children:[e.jsx("h1",{children:n("welcomeTitle")}),e.jsx("p",{children:n("welcomeInfo")}),r&&!t&&e.jsx(u,{onClick:o,children:n("goMain")})]})})}const A=new Map;function f(n,s,a){A.set(n,{en:s,ru:a})}function y(n){const s=F.resolvedLanguage,a=A.get(n);if(a){if(s=="en")return a.en;if(s=="ru")return a.ru}return n}f("auth/invalid-email","Invalid email","Некорректный адрес электронной почты");f("auth/email-already-in-use","Email address is already in use by another user","Адрес электронной почты уже используется другим пользователем");f("auth/wrong-password","Wrong password","Неправильный пароль");f("auth/user-not-found","User not found","Пользователь не найден");f("auth/network-request-failed","Network request failed, possibly no Internet connection ","Запрос к сети не удался, возможно нет подключения к Интернету ");function re(){const{t:n}=m(),s=j(),a=x(),[r,t]=b(a),o=async()=>{c()&&M(a,l.values.email,l.values.password).then(i=>{h.show({title:n("userLogin"),message:p()+" - "+i.user.email,autoClose:!0,color:"green"})}).catch(i=>{h.show({title:n("errorFirebaseAuth"),message:p()+" - "+y(i.code),autoClose:2e4,color:"red"})})},c=()=>Object.keys(l.errors).length===0,v=()=>{h.clean(),c()&&U(a,l.values.email,l.values.password).then(i=>{h.show({title:n("userCreate"),message:p()+" - "+i.user.email,autoClose:!0,color:"green"})}).catch(i=>{h.show({title:n("errorFirebaseAuth"),message:p()+" - "+y(i.code),autoClose:2e4,color:"red"})})};g.useEffect(()=>{r&&!t&&s("/main",{replace:!0})});const l=H({validateInputOnChange:!0,initialValues:{email:"",password:""},validate:{password:i=>/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d][A-Za-z\d!@#$%^&*()_+]{7,19}$/.test(i)?null:n("errorInvalidPassword"),email:i=>/^\S+@\S+$/.test(i)?null:n("errorInvalidEmail")}});return r&&t?e.jsx(N,{children:n("checkAuth")}):e.jsx("div",{className:"sign_in_up",children:e.jsx(w,{className:"sign_in_up_inputs",children:e.jsxs("form",{onSubmit:l.onSubmit(()=>{}),children:[e.jsxs(_,{direction:"column",children:[e.jsx(D,{label:n("labelEmail"),placeholder:""+n("labelEmail"),...l.getInputProps("email")}),e.jsx(q,{label:n("labelPassword"),placeholder:""+n("labelPassword"),...l.getInputProps("password")})]}),e.jsx(B,{h:"md"}),e.jsxs(_,{gap:"md",justify:"center",children:[e.jsx(u,{className:"sign_in_up_button",type:"submit",onClick:o,children:n("labelSignIn")}),e.jsx(u,{className:"sign_in_up_button",type:"submit",onClick:v,variant:"outline",children:n("labelSignUp")})]})]})})})}const ie=[{path:"/",link:"Welcome",name:"Welcome page",element:e.jsx(oe,{})},{path:"/main",link:"Main",name:"Main page",element:e.jsx(ae,{})},{path:"/auth",link:"SignIn/SignUp",name:"Sign page",element:e.jsx(re,{})}];function le(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"page_layout",children:[e.jsx(ee,{}),e.jsxs(W,{children:[ie.map(n=>g.createElement(S,{...n,key:Z()})),e.jsx(S,{path:"*",element:e.jsx(Y,{})})]}),e.jsx(ne,{})]})})}L.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsxs(G,{withGlobalStyles:!0,withNormalizeCSS:!0,children:[e.jsx(V,{position:"top-center"}),e.jsx(K,{children:e.jsx(E,{children:e.jsx(le,{})})})]})}));
