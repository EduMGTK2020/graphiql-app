import{r as h,j as e,a as A}from"./react-d84e5e68.js";import{c as L}from"./react-dom-8b7ac5e7.js";import{H as P}from"./react-router-dom-c468db3a.js";import{i as E,g as p,s as k,c as M}from"./@firebase-7dbc1d44.js";import"./firebase-36553ef7.js";import{i as y}from"./i18next-81a9e9b1.js";import{i as U,u as d}from"./react-i18next-30f3ddb2.js";import{u as x,a as T,b as O,c as N}from"./react-router-1b3d7f17.js";import{B as u,S as W,C as S,a as v,A as $,n as m,L as R,u as H,F as _,T as z,P as q,b as B,M as D,N as G}from"./@mantine-177c66bc.js";import{u as j}from"./react-firebase-hooks-7c3c1dd0.js";import{v as Z}from"./uuid-cf522c50.js";import"./fast-deep-equal-4802929f.js";import"./scheduler-765c72db.js";import"./@remix-run-073e1ff6.js";import"./idb-81bdbf9b.js";import"./@babel-8f34527c.js";import"./clsx-de421188.js";import"./@emotion-b857b527.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./stylis-79144faa.js";import"./react-transition-group-5a3e3d43.js";import"./klona-192252da.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();E({apiKey:"AIzaSyB_5MCwcB7MJute_P3TZYHaMOH17CrmrIc"});const V=({children:n})=>{const t=p();return h.useEffect(()=>t.onAuthStateChanged(r=>{console.log(r)}),[t]),e.jsx(e.Fragment,{children:n})},K={team:"Team",checkAuth:"Check auth...",mainTitle:"Main page",mainInfo:"Section - editor, variables, headers (for query), documentation, response",welcomeTitle:"Welcome page",welcomeInfo:"Developers, project, course",goMain:"Go to Main page",goWelcome:"Go to Welcome page",labelSignIn:"Sigh In",labelSignUp:"Sign Up",labelSignOut:"Sigh Out",labelEmail:"Email",labelPassword:"Password",errorInvalidEmail:"Invalid email",errorInvalidPassword:"Invalid password, must be 8-20 symbols, at least one letter, one digit, one special character",pageNotFound:"Page not found",footerTitle:"Footer",footerInfo:"Link to authors github, app year, course logo with link to the course",userCreate:"User create & login",userLogin:"User login",userLogout:"User logout",errorFirebaseAuth:"Firebase auth error"},Q={team:"Команда",checkAuth:"Проверка авторизации...",mainTitle:"Главная страница",mainInfo:"Секции - редактор, переменные, заголовки (для запроса), документация, ответ",welcomeTitle:"Страница приветствия",welcomeInfo:"Разработчики, проект, курс",goMain:"Перейти на Главную страницу",goWelcome:"Перейти на страницу приветствия",labelSignIn:"Вход",labelSignUp:"Регистрация",labelSignOut:"Выход",labelEmail:"Адрес электронной почты",labelPassword:"Пароль",errorInvalidEmail:"Некорректный адрес электронной почты",errorInvalidPassword:"Пароль должен состоять из 8-20 символов, влючать хотя бы одну букву, одну цифру, один спец.символ",pageNotFound:"Страница не найдена",footerTitle:"Контакты",footerInfo:"Ссылки на репо авторов, год публикации приложения, лого курса со ссылкой на него",userCreate:"Пользователь зарегистрирован",userLogin:"Вход пользователя",userLogout:"Выход пользователя",errorFirebaseAuth:"Ошибка аутентификации Firebase"};y.use(U).init({lng:"en",debug:!1,resources:{en:{translation:K},ru:{translation:Q}}});function J(){const{t:n}=d(),t=x(),a=()=>{t("/")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"not_found",children:[e.jsx("h1",{children:n("pageNotFound")}),e.jsx(u,{onClick:a,children:n("goWelcome")})]})})}function g(){const n=new Date;return""+n.getHours()+":"+(n.getMinutes()<10?"0":"")+n.getMinutes()}function Y(){const[n,t]=h.useState("en"),{i18n:a}=d(),r=()=>{n=="en"?(t("ru"),a.changeLanguage("ru")):(t("en"),a.changeLanguage("en"))},s="#228be6";return e.jsx(e.Fragment,{children:e.jsx(W,{value:n,onChange:r,data:[{value:"en",label:e.jsx(S,{children:e.jsx(v,{sx:{color:n=="en"?s:""},children:"En"})})},{value:"ru",label:e.jsx(S,{children:e.jsx(v,{sx:{color:n=="ru"?s:""},children:"Рус"})})}]})})}function X(){const{t:n}=d(),t=x(),a=T(),r=p(),[s,o]=j(r),c=()=>{t("/auth")},b=()=>{const C=s==null?void 0:s.email;r.signOut().then(()=>{m.show({title:n("userLogout"),message:g()+" - "+C,autoClose:!0,color:"green"}),t("/auth")})},l=()=>{t("/")},i=!s&&!o;return e.jsx(e.Fragment,{children:e.jsxs("header",{className:"header_app",children:[e.jsxs("h2",{children:["GraphiQL - ",n("team")," #6"]}),e.jsxs("div",{className:"header_buttons",children:[e.jsx(Y,{}),i&&a.pathname!="/auth"&&e.jsxs(u,{onClick:c,className:"header_sign_button",children:[n("labelSignIn")," / ",n("labelSignUp")]}),i&&a.pathname=="/auth"&&e.jsx(u,{onClick:l,className:"header_sign_button",children:n("goWelcome")}),s&&!o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"header_user",children:[e.jsx($,{radius:"xl"}),e.jsx("div",{children:s.email})]}),e.jsx(u,{onClick:b,className:"header_sign_button",children:n("labelSignOut")})]})]})]})})}function ee(){const{t:n}=d();return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:"footer_app",children:[e.jsx("h2",{children:n("footerTitle")}),e.jsx("p",{children:n("footerInfo")})]})})}const w=({children:n})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"loader",children:[e.jsx(R,{size:"xl",variant:"dots"}),n&&e.jsx("h4",{children:n})]})});function ne(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"docs_container",children:"Documentation"})})}function se(){const{t:n}=d(),t=x(),a=p(),[r,s]=j(a);return h.useEffect(()=>{!r&&!s&&t("/auth",{replace:!0})}),s?e.jsx(w,{children:n("checkAuth")}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"main",children:[e.jsxs("div",{className:"main_docs",children:[e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:"Documentation"})}),e.jsx(h.Suspense,{fallback:e.jsx(w,{children:"Загрузка..."}),children:e.jsx(ne,{})})]}),e.jsxs("div",{className:"main_request",children:[e.jsx("div",{className:"main_query",children:e.jsxs("div",{className:"main_header",children:[e.jsx("div",{className:"main_title",children:"Query"}),e.jsx(u,{children:"Run"})]})}),e.jsx("textarea",{}),e.jsx("div",{className:"main_variables",children:"Variables"}),e.jsx("div",{className:"main_headers",children:"Headers"})]}),e.jsx("div",{className:"main_response",children:e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:"Response"})})})]})})}function te(){const{t:n}=d(),t=x(),a=p(),[r,s]=j(a),o=()=>{t("/main")};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"welcome",children:[e.jsx("h1",{children:n("welcomeTitle")}),e.jsx("p",{children:n("welcomeInfo")}),r&&!s&&e.jsx(u,{onClick:o,children:n("goMain")})]})})}const F=new Map;function f(n,t,a){F.set(n,{en:t,ru:a})}function I(n){const t=y.resolvedLanguage,a=F.get(n);if(a){if(t=="en")return a.en;if(t=="ru")return a.ru}return n}f("auth/invalid-email","Invalid email","Некорректный адрес электронной почты");f("auth/email-already-in-use","Email address is already in use by another user","Адрес электронной почты уже используется другим пользователем");f("auth/wrong-password","Wrong password","Неправильный пароль");f("auth/user-not-found","User not found","Пользователь не найден");f("auth/network-request-failed","Network request failed, possibly no Internet connection ","Запрос к сети не удался, возможно нет подключения к Интернету ");function ae(){const{t:n}=d(),t=x(),a=p(),[r,s]=j(a),o=async()=>{c()&&k(a,l.values.email,l.values.password).then(i=>{m.show({title:n("userLogin"),message:g()+" - "+i.user.email,autoClose:!0,color:"green"})}).catch(i=>{m.show({title:n("errorFirebaseAuth"),message:g()+" - "+I(i.code),autoClose:2e4,color:"red"})})},c=()=>Object.keys(l.errors).length===0,b=()=>{m.clean(),c()&&M(a,l.values.email,l.values.password).then(i=>{m.show({title:n("userCreate"),message:g()+" - "+i.user.email,autoClose:!0,color:"green"})}).catch(i=>{m.show({title:n("errorFirebaseAuth"),message:g()+" - "+I(i.code),autoClose:2e4,color:"red"})})};h.useEffect(()=>{r&&!s&&t("/main",{replace:!0})});const l=H({validateInputOnChange:!0,initialValues:{email:"",password:""},validate:{password:i=>/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d][A-Za-z\d!@#$%^&*()_+]{7,19}$/.test(i)?null:n("errorInvalidPassword"),email:i=>/^\S+@\S+$/.test(i)?null:n("errorInvalidEmail")}});return r&&s?e.jsx(w,{children:n("checkAuth")}):e.jsx("div",{className:"sign_in_up",children:e.jsx(v,{className:"sign_in_up_inputs",children:e.jsxs("form",{onSubmit:l.onSubmit(()=>{}),children:[e.jsxs(_,{direction:"column",children:[e.jsx(z,{label:n("labelEmail"),placeholder:""+n("labelEmail"),...l.getInputProps("email")}),e.jsx(q,{label:n("labelPassword"),placeholder:""+n("labelPassword"),...l.getInputProps("password")})]}),e.jsx(B,{h:"md"}),e.jsxs(_,{gap:"md",justify:"center",children:[e.jsx(u,{className:"sign_in_up_button",type:"submit",onClick:o,children:n("labelSignIn")}),e.jsx(u,{className:"sign_in_up_button",type:"submit",onClick:b,variant:"outline",children:n("labelSignUp")})]})]})})})}const oe=[{path:"/",link:"Welcome",name:"Welcome page",element:e.jsx(te,{})},{path:"/main",link:"Main",name:"Main page",element:e.jsx(se,{})},{path:"/auth",link:"SignIn/SignUp",name:"Sign page",element:e.jsx(ae,{})}];function re(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"page_layout",children:[e.jsx(X,{}),e.jsxs(O,{children:[oe.map(n=>h.createElement(N,{...n,key:Z()})),e.jsx(N,{path:"*",element:e.jsx(J,{})})]}),e.jsx(ee,{})]})})}L.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsxs(D,{withGlobalStyles:!0,withNormalizeCSS:!0,children:[e.jsx(G,{position:"top-center"}),e.jsx(V,{children:e.jsx(P,{children:e.jsx(re,{})})})]})}));
