import{r as g,j as e,a as A}from"./react-d84e5e68.js";import{c as L}from"./react-dom-8b7ac5e7.js";import{H as P}from"./react-router-dom-c468db3a.js";import{i as E,g as p,s as M,c as k}from"./@firebase-7dbc1d44.js";import"./firebase-36553ef7.js";import{i as _}from"./i18next-81a9e9b1.js";import{i as U,u as d}from"./react-i18next-30f3ddb2.js";import{u as x,a as T,b as O,c as N}from"./react-router-1b3d7f17.js";import{B as u,S as W,C as w,a as b,A as $,n as m,L as R,u as H,F as S,T as z,P as q,b as B,M as G,N as Z}from"./@mantine-177c66bc.js";import{u as j}from"./react-firebase-hooks-7c3c1dd0.js";import{v as D}from"./uuid-cf522c50.js";import"./fast-deep-equal-4802929f.js";import"./scheduler-765c72db.js";import"./@remix-run-073e1ff6.js";import"./idb-81bdbf9b.js";import"./@babel-8f34527c.js";import"./clsx-de421188.js";import"./@emotion-b857b527.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./stylis-79144faa.js";import"./react-transition-group-5a3e3d43.js";import"./klona-192252da.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();E({apiKey:"AIzaSyB_5MCwcB7MJute_P3TZYHaMOH17CrmrIc"});const V=({children:s})=>{const t=p();return g.useEffect(()=>t.onAuthStateChanged(o=>{console.log(o)}),[t]),e.jsx(e.Fragment,{children:s})},K={team:"Team",checkAuth:"Check auth...",mainTitle:"Main page",mainInfo:"Section - editor, variables, headers (for query), documentation, response",welcomeTitle:"Welcome page",welcomeInfo:"Developers, project, course",goMain:"Go to Main page",goWelcome:"Go to Welcome page",labelSignIn:"Sigh In",labelSignUp:"Sign Up",labelSignOut:"Sigh Out",labelEmail:"Email",labelPassword:"Password",errorInvalidEmail:"Invalid email",errorInvalidPassword:"Invalid password, must be 8-20 symbols, at least one letter, one digit, one special character",pageNotFound:"Page not found",footerTitle:"Footer",footerInfo:"Link to authors github, app year, course logo with link to the course",userCreate:"User create & login",userLogin:"User login",userLogout:"User logout",errorFirebaseAuth:"Firebase auth error"},Q={team:"Команда",checkAuth:"Проверка авторизации...",mainTitle:"Главная страница",mainInfo:"Секции - редактор, переменные, заголовки (для запроса), документация, ответ",welcomeTitle:"Страница приветствия",welcomeInfo:"Разработчики, проект, курс",goMain:"Перейти на Главную страницу",goWelcome:"Перейти на страницу приветствия",labelSignIn:"Вход",labelSignUp:"Регистрация",labelSignOut:"Выход",labelEmail:"Адрес электронной почты",labelPassword:"Пароль",errorInvalidEmail:"Некорректный адрес электронной почты",errorInvalidPassword:"Пароль должен состоять из 8-20 символов, влючать хотя бы одну букву, одну цифру, один спец.символ",pageNotFound:"Страница не найдена",footerTitle:"Контакты",footerInfo:"Ссылки на репо авторов, год публикации приложения, лого курса со ссылкой на него",userCreate:"Пользователь зарегистрирован",userLogin:"Вход пользователя",userLogout:"Выход пользователя",errorFirebaseAuth:"Ошибка аутентификации Firebase"};_.use(U).init({lng:"en",debug:!1,resources:{en:{translation:K},ru:{translation:Q}}});function J(){const{t:s}=d(),t=x(),a=()=>{t("/")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"not_found",children:[e.jsx("h1",{children:s("pageNotFound")}),e.jsx(u,{onClick:a,children:s("goWelcome")})]})})}function h(){const s=new Date;return""+s.getHours()+":"+(s.getMinutes()<10?"0":"")+s.getMinutes()}function Y(){const[s,t]=g.useState("en"),{i18n:a}=d(),o=()=>{s=="en"?(t("ru"),a.changeLanguage("ru")):(t("en"),a.changeLanguage("en"))},n="#228be6";return e.jsx(e.Fragment,{children:e.jsx(W,{value:s,onChange:o,data:[{value:"en",label:e.jsx(w,{children:e.jsx(b,{sx:{color:s=="en"?n:""},children:"En"})})},{value:"ru",label:e.jsx(w,{children:e.jsx(b,{sx:{color:s=="ru"?n:""},children:"Рус"})})}]})})}function X(){const{t:s}=d(),t=x(),a=T(),o=p(),[n,r]=j(o),c=()=>{t("/auth")},v=()=>{const C=n==null?void 0:n.email;o.signOut().then(()=>{m.show({title:s("userLogout"),message:h()+" - "+C,autoClose:!0,color:"green"}),t("/auth")})},l=()=>{t("/")},i=!n&&!r;return e.jsx(e.Fragment,{children:e.jsxs("header",{className:"header_app",children:[e.jsxs("h2",{children:["GraphiQL - ",s("team")," #6"]}),e.jsxs("div",{className:"header_buttons",children:[e.jsx(Y,{}),i&&a.pathname!="/auth"&&e.jsxs(u,{onClick:c,className:"header_sign_button",children:[s("labelSignIn")," / ",s("labelSignUp")]}),i&&a.pathname=="/auth"&&e.jsx(u,{onClick:l,className:"header_sign_button",children:s("goWelcome")}),n&&!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"header_user",children:[e.jsx($,{radius:"xl"}),e.jsx("div",{children:n.email})]}),e.jsx(u,{onClick:v,className:"header_sign_button",children:s("labelSignOut")})]})]})]})})}function ee(){const{t:s}=d();return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:"footer_app",children:[e.jsx("h2",{children:s("footerTitle")}),e.jsx("p",{children:s("footerInfo")})]})})}function y(){return e.jsx("div",{className:"loader",children:e.jsx(R,{size:"xl",variant:"dots"})})}function se(){const{t:s}=d(),t=x(),a=p(),[o,n]=j(a);return g.useEffect(()=>{!o&&!n&&t("/auth",{replace:!0})}),n?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"loader",children:[e.jsx(y,{}),e.jsx("h4",{children:s("checkAuth")})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"main",children:[e.jsx("div",{className:"main_docs",children:e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:"Documentation"})})}),e.jsxs("div",{className:"main_request",children:[e.jsx("div",{className:"main_query",children:e.jsxs("div",{className:"main_header",children:[e.jsx("div",{className:"main_title",children:"Query"}),e.jsx(u,{children:"Run"})]})}),e.jsx("textarea",{}),e.jsx("div",{className:"main_variables",children:"Variables"}),e.jsx("div",{className:"main_headers",children:"Headers"})]}),e.jsx("div",{className:"main_response",children:e.jsx("div",{className:"main_header",children:e.jsx("div",{className:"main_title",children:"Response"})})})]})})}function ne(){const{t:s}=d(),t=x(),a=p(),[o,n]=j(a),r=()=>{t("/main")};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"welcome",children:[e.jsx("h1",{children:s("welcomeTitle")}),e.jsx("p",{children:s("welcomeInfo")}),o&&!n&&e.jsx(u,{onClick:r,children:s("goMain")})]})})}const F=new Map;function f(s,t,a){F.set(s,{en:t,ru:a})}function I(s){const t=_.resolvedLanguage,a=F.get(s);if(a){if(t=="en")return a.en;if(t=="ru")return a.ru}return s}f("auth/invalid-email","Invalid email","Некорректный адрес электронной почты");f("auth/email-already-in-use","Email address is already in use by another user","Адрес электронной почты уже используется другим пользователем");f("auth/wrong-password","Wrong password","Неправильный пароль");f("auth/user-not-found","User not found","Пользователь не найден");f("auth/network-request-failed","Network request failed, possibly no Internet connection ","Запрос к сети не удался, возможно нет подключения к Интернету ");function te(){const{t:s}=d(),t=x(),a=p(),[o,n]=j(a),r=async()=>{c()&&M(a,l.values.email,l.values.password).then(i=>{m.show({title:s("userLogin"),message:h()+" - "+i.user.email,autoClose:!0,color:"green"})}).catch(i=>{m.show({title:s("errorFirebaseAuth"),message:h()+" - "+I(i.code),autoClose:2e4,color:"red"})})},c=()=>Object.keys(l.errors).length===0,v=()=>{m.clean(),c()&&k(a,l.values.email,l.values.password).then(i=>{m.show({title:s("userCreate"),message:h()+" - "+i.user.email,autoClose:!0,color:"green"})}).catch(i=>{m.show({title:s("errorFirebaseAuth"),message:h()+" - "+I(i.code),autoClose:2e4,color:"red"})})};g.useEffect(()=>{o&&!n&&t("/main",{replace:!0})});const l=H({validateInputOnChange:!0,initialValues:{email:"",password:""},validate:{password:i=>/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d][A-Za-z\d!@#$%^&*()_+]{7,19}$/.test(i)?null:s("errorInvalidPassword"),email:i=>/^\S+@\S+$/.test(i)?null:s("errorInvalidEmail")}});return o&&n?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"loader",children:[e.jsx(y,{})," ",e.jsx("h4",{children:s("checkAuth")})]})}):e.jsx("div",{className:"sign_in_up",children:e.jsx(b,{className:"sign_in_up_inputs",children:e.jsxs("form",{onSubmit:l.onSubmit(()=>{}),children:[e.jsxs(S,{direction:"column",children:[e.jsx(z,{label:s("labelEmail"),placeholder:""+s("labelEmail"),...l.getInputProps("email")}),e.jsx(q,{label:s("labelPassword"),placeholder:""+s("labelPassword"),...l.getInputProps("password")})]}),e.jsx(B,{h:"md"}),e.jsxs(S,{gap:"md",justify:"center",children:[e.jsx(u,{className:"sign_in_up_button",type:"submit",onClick:r,children:s("labelSignIn")}),e.jsx(u,{className:"sign_in_up_button",type:"submit",onClick:v,variant:"outline",children:s("labelSignUp")})]})]})})})}const ae=[{path:"/",link:"Welcome",name:"Welcome page",element:e.jsx(ne,{})},{path:"/main",link:"Main",name:"Main page",element:e.jsx(se,{})},{path:"/auth",link:"SignIn/SignUp",name:"Sign page",element:e.jsx(te,{})}];function re(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"page_layout",children:[e.jsx(X,{}),e.jsxs(O,{children:[ae.map(s=>g.createElement(N,{...s,key:D()})),e.jsx(N,{path:"*",element:e.jsx(J,{})})]}),e.jsx(ee,{})]})})}L.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsxs(G,{withGlobalStyles:!0,withNormalizeCSS:!0,children:[e.jsx(Z,{position:"top-center"}),e.jsx(V,{children:e.jsx(P,{children:e.jsx(re,{})})})]})}));
